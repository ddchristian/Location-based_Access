
<!--
{#

Sample web references:
https://overiq.com/flask-101/basics-of-jinja-template-language/
http://jinja.pocoo.org/docs/2.10/templates/#expressions
https://www.webforefront.com/django/usebuiltinjinjafilters.html

#}
-->

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Location Policy Update</title>

    <style>
    option   {color: blue;}
    </style>
</head>

<body>

    <form name = "location" action="{{ url_for('config_update')}}" method="post" >


        <h1>Location Policy and Update</h1>
        <h2>Hold down the Ctrl (windows) / Command (Mac) button to select multiple options.</h2>


    {%- for zone, policy in zones.items() %}

        {% set zone_var = ['zone', loop.index]|join %}
        {% set policy_var = ['policy', loop.index]|join %}
        {% set group_var = ['group', loop.index]|join %}
<!--
{#
        <p>This is zone {{ zone }}</p>
        <p>This is policy {{ policy }}</p>
        <p>This is default_policy policy-policy {{ policy['policy'] }}</p>
        <p>This is default_policy policy-groups {{ policy['groups'] }}</p>
#}
-->
        <input type="checkbox" name="{{ zone_var }}" value="{{ zone }}"> {{ zone }}
            <select name="{{ policy_var }}" >
                {%- for policy_defined, selected in policy['policy'].items() %}
                    <option value={{ policy_defined | lower }}  {{ selected }}>{{ policy_defined }}</option>
                {%- endfor %}
            </select>

            <select name="{{ group_var }}" multiple size={{ policy['groups'] | length + 1 }}>
                {%- for group, selected in policy['groups'].items() %}
                    <option value={{ group }}  {{ selected }}>{{ group }}</option>
                {%- endfor %}
            </select>

        <br><br>
    {%- endfor %}

<!--
{#
        <input type="checkbox" name="zone3" value="ZoneC"> Zone C
            <select name="policy3">
                <option value="allow">Allow</option>
                <option value="deny">Deny</option>
                <option value="acl">ACL</option>
            </select>

            <select name="group3" multiple>
                <option value="loc-testing" selected>loc-testing</option>
                <option value="nurses">Nurses</option>
                <option value="doctors" selected>Doctors</option>
                <option value="employees">Employees</option>
            </select>

        <br><br>

        <input type="checkbox" name="zone4" value="ZoneD"> Zone D
            <select name="policy4">
                <option value="allow">Allow</option>
                <option value="deny">Deny</option>
                <option value="acl">ACL</option>
            </select>

            <input type="checkbox" name="group3" value="loc-testing"> loc-testing
            <input type="checkbox" name="group3" value="nurses"> Nurses
            <input type="checkbox" name="group3" value="doctors"> Doctors
            <input type="checkbox" name="group3" value="employees"> Employees

        <br><br>

        <input type="checkbox" name="zone5" value="Zone E"> Zone E
            <select name="policy5">
                <option value="allow">Allow</option>
                <option value="deny">Deny</option>
                <option value="acl">ACL</option>
            </select>

            <select name="group5" multiple>
                <option value="loc-testing" selected>loc-testing</option>
                <option value="nurses">Nurses</option>
                <option value="doctors" selected>Doctors</option>
                <option value="employees">Employees</option>
            </select>

        <br>

#}
-->
        <p>For Zones without a defined policy the default policy will be assigned</p>
        <input type="checkbox" name="zone_default" value="default_policy"> Default Policy
            <select name="policy_default">
                {%- for policy, selected in default_policy['policy'].items() %}
                    <option value={{ policy | lower }}  {{ selected }}>{{ policy }}</option>
                {%- endfor %}

            </select>

            <select name="group_default" multiple size={{ default_policy['groups'] | length + 1 }}>
                {%- for group, selected in default_policy['groups'].items() %}
                    <option value={{ group }}  {{ selected }}>{{ group }}</option>
                {%- endfor %}

            </select>

        <br>

 <!--

        <p>This is default_policy policy{{ default_policy['policy'] }}</p>
        <p>This is default_policy groups: {{ default_policy['groups'] }}</p>
        <input type="submit" value="Reset" formaction="{{ url_for('config_update')}}" method="get">
-->

        <input type="submit" value="Submit">
        <input type="reset">

    </form>

<p>Click the "Submit" button to submit the query or "Reset" to set the form to default.</p>

</body>
</html>
